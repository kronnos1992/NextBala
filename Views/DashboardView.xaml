<UserControl x:Class="NextBala.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="clr-namespace:NextBala.ViewModels"
             xmlns:converters="clr-namespace:NextBala.Converters"
             mc:Ignorable="d"
             d:DesignHeight="800"
             d:DesignWidth="1400"
             Background="#EEF2F7">

        <UserControl.DataContext>
                <vm:DashboardViewModel/>
        </UserControl.DataContext>

        <UserControl.Resources>
                <!-- Conversores -->
                <converters:StatusToVisibilityConverter x:Key="StatusToVisibilityConverter"/>
                <converters:DateMaskConverter x:Key="DateMaskConverter"/>
                <converters:NotNullConverter x:Key="NotNullConverter"/>
                <converters:StringEqualsConverter x:Key="StringEqualsConverter"/>

                <!-- Sombra mais suave -->
                <DropShadowEffect x:Key="Shadow"
                                  BlurRadius="10"
                                  ShadowDepth="1"
                                  Opacity="0.1"/>

                <!-- Estilo para Cards - ainda mais compacto -->
                <Style x:Key="CardStyle"
                       TargetType="Border">
                        <Setter Property="Background"
                                Value="White"/>
                        <Setter Property="CornerRadius"
                                Value="8"/>
                        <Setter Property="Padding"
                                Value="8"/>
                        <Setter Property="Effect"
                                Value="{StaticResource Shadow}"/>
                </Style>

                <!-- Estilo para Cards sem sombra -->
                <Style x:Key="SimpleCardStyle"
                       TargetType="Border">
                        <Setter Property="Background"
                                Value="White"/>
                        <Setter Property="CornerRadius"
                                Value="6"/>
                        <Setter Property="Padding"
                                Value="8"/>
                        <Setter Property="BorderBrush"
                                Value="#E0E6ED"/>
                        <Setter Property="BorderThickness"
                                Value="1"/>
                </Style>

                <!-- Estilo para ListView de TÃ©cnicos - mais compacto -->
                <Style x:Key="TecnicoListViewStyle"
                       TargetType="ListView">
                        <Setter Property="Background"
                                Value="Transparent"/>
                        <Setter Property="BorderThickness"
                                Value="0"/>
                        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
                                Value="Disabled"/>
                        <Setter Property="ItemContainerStyle">
                                <Setter.Value>
                                        <Style TargetType="ListViewItem">
                                                <Setter Property="Background"
                                                        Value="Transparent"/>
                                                <Setter Property="BorderThickness"
                                                        Value="0"/>
                                                <Setter Property="Padding"
                                                        Value="4,2"/>
                                                <Setter Property="HorizontalContentAlignment"
                                                        Value="Stretch"/>
                                                <Setter Property="Template">
                                                        <Setter.Value>
                                                                <ControlTemplate TargetType="ListViewItem">
                                                                        <Border Background="{TemplateBinding Background}"
                                                                                BorderThickness="0"
                                                                                Padding="{TemplateBinding Padding}">
                                                                                <ContentPresenter HorizontalAlignment="Stretch"/>
                                                                        </Border>
                                                                </ControlTemplate>
                                                        </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                        <Trigger Property="IsMouseOver"
                                                                 Value="True">
                                                                <Setter Property="Background"
                                                                        Value="#F0F7FF"/>
                                                        </Trigger>
                                                </Style.Triggers>
                                        </Style>
                                </Setter.Value>
                        </Setter>
                </Style>

                <!-- Estilo para Separador - mais fino -->
                <Style x:Key="SeparatorStyle"
                       TargetType="Border">
                        <Setter Property="Height"
                                Value="1"/>
                        <Setter Property="Background"
                                Value="#E0E6ED"/>
                        <Setter Property="Margin"
                                Value="0,2"/>
                </Style>

                <!-- BotÃ£o padrÃ£o - mais compacto -->
                <Style TargetType="Button">
                        <Setter Property="Foreground"
                                Value="White"/>
                        <Setter Property="Padding"
                                Value="8,6"/>
                        <Setter Property="FontWeight"
                                Value="Bold"/>
                        <Setter Property="Cursor"
                                Value="Hand"/>
                        <Setter Property="BorderThickness"
                                Value="0"/>
                        <Setter Property="MinWidth"
                                Value="80"/>
                        <Setter Property="Height"
                                Value="28"/>
                        <Setter Property="FontSize"
                                Value="10"/>
                        <Setter Property="Template">
                                <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                        CornerRadius="6"
                                                        BorderThickness="0"
                                                        Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center"
                                                                          VerticalAlignment="Center"/>
                                                </Border>
                                        </ControlTemplate>
                                </Setter.Value>
                        </Setter>
                </Style>

                <!-- Estilo para Valores Grandes - reduzido -->
                <Style x:Key="BigValueStyle"
                       TargetType="TextBlock">
                        <Setter Property="FontSize"
                                Value="20"/>
                        <Setter Property="FontWeight"
                                Value="Bold"/>
                        <Setter Property="Foreground"
                                Value="#2C3E50"/>
                        <Setter Property="HorizontalAlignment"
                                Value="Center"/>
                </Style>

                <!-- Estilo para RÃ³tulos - reduzido -->
                <Style x:Key="LabelStyle"
                       TargetType="TextBlock">
                        <Setter Property="FontSize"
                                Value="10"/>
                        <Setter Property="Foreground"
                                Value="#7F8C8D"/>
                        <Setter Property="HorizontalAlignment"
                                Value="Center"/>
                </Style>

                <!-- Estilo para TextBox moderno - mais compacto -->
                <Style x:Key="TextBoxStyle"
                       TargetType="TextBox">
                        <Setter Property="Background"
                                Value="#F4F7FB"/>
                        <Setter Property="BorderBrush"
                                Value="#D6DFEA"/>
                        <Setter Property="BorderThickness"
                                Value="1"/>
                        <Setter Property="Padding"
                                Value="4,3"/>
                        <Setter Property="FontSize"
                                Value="11"/>
                        <Setter Property="Height"
                                Value="26"/>
                        <Setter Property="Foreground"
                                Value="#2C3E50"/>
                        <Setter Property="VerticalContentAlignment"
                                Value="Center"/>
                        <Setter Property="Template">
                                <Setter.Value>
                                        <ControlTemplate TargetType="TextBox">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ScrollViewer x:Name="PART_ContentHost"
                                                                      VerticalAlignment="Center"
                                                                      Margin="3,0"/>
                                                </Border>
                                        </ControlTemplate>
                                </Setter.Value>
                        </Setter>
                </Style>

                <!-- TextBox com mÃ¡scara para data -->
                <Style x:Key="DataTextBoxStyle"
                       TargetType="TextBox"
                       BasedOn="{StaticResource TextBoxStyle}">
                        <Setter Property="Height"
                                Value="26"/>
                        <Setter Property="FontSize"
                                Value="11"/>
                        <Setter Property="MaxLength"
                                Value="10"/>
                        <Setter Property="ToolTip"
                                Value="Digite a data no formato dd/MM/yyyy"/>
                </Style>

                <!-- Estilo para ComboBox - mais compacto -->
                <Style x:Key="ComboBoxStyle"
                       TargetType="ComboBox">
                        <Setter Property="Background"
                                Value="#F4F7FB"/>
                        <Setter Property="BorderBrush"
                                Value="#D6DFEA"/>
                        <Setter Property="BorderThickness"
                                Value="1"/>
                        <Setter Property="Padding"
                                Value="4,3"/>
                        <Setter Property="FontSize"
                                Value="11"/>
                        <Setter Property="Height"
                                Value="26"/>
                        <Setter Property="Foreground"
                                Value="#2C3E50"/>
                        <Setter Property="Template">
                                <Setter.Value>
                                        <ControlTemplate TargetType="ComboBox">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <Grid>
                                                                <ToggleButton x:Name="ToggleButton"
                                                                              Grid.Column="2"
                                                                              IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                                              Background="Transparent"
                                                                              BorderThickness="0"
                                                                              HorizontalAlignment="Right"
                                                                              Width="20">
                                                                        <Path Data="M 0 0 L 4 4 L 8 0"
                                                                              Fill="#3498DB"
                                                                              Margin="0,2,0,0"
                                                                              HorizontalAlignment="Center"
                                                                              VerticalAlignment="Center"/>
                                                                </ToggleButton>
                                                                <ContentPresenter x:Name="ContentSite"
                                                                                  Margin="{TemplateBinding Padding}"
                                                                                  VerticalAlignment="Center"
                                                                                  Content="{TemplateBinding SelectionBoxItem}"
                                                                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                                                  ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"/>
                                                                <Popup x:Name="Popup"
                                                                       Placement="Bottom"
                                                                       IsOpen="{TemplateBinding IsDropDownOpen}"
                                                                       AllowsTransparency="True"
                                                                       Focusable="False"
                                                                       PopupAnimation="Slide">
                                                                        <Border BorderThickness="1"
                                                                                BorderBrush="#D6DFEA"
                                                                                Background="White"
                                                                                CornerRadius="4"
                                                                                MaxHeight="180"
                                                                                Margin="0,2,0,0">
                                                                                <ScrollViewer>
                                                                                        <ItemsPresenter/>
                                                                                </ScrollViewer>
                                                                        </Border>
                                                                </Popup>
                                                        </Grid>
                                                </Border>
                                        </ControlTemplate>
                                </Setter.Value>
                        </Setter>
                </Style>

                <!-- Estilo para DataGrid - mais compacto -->
                <Style x:Key="RoundedDataGrid"
                       TargetType="DataGrid">
                        <Setter Property="BorderThickness"
                                Value="0"/>
                        <Setter Property="Background"
                                Value="White"/>
                        <Setter Property="RowBackground"
                                Value="White"/>
                        <Setter Property="AlternatingRowBackground"
                                Value="#F9FBFD"/>
                        <Setter Property="HeadersVisibility"
                                Value="Column"/>
                        <Setter Property="GridLinesVisibility"
                                Value="None"/>
                        <Setter Property="FontSize"
                                Value="10"/>
                        <Setter Property="RowHeight"
                                Value="24"/>
                        <Setter Property="CellStyle">
                                <Setter.Value>
                                        <Style TargetType="DataGridCell">
                                                <Setter Property="BorderThickness"
                                                        Value="0"/>
                                                <Setter Property="Padding"
                                                        Value="3"/>
                                                <Setter Property="FocusVisualStyle"
                                                        Value="{x:Null}"/>
                                                <Setter Property="VerticalAlignment"
                                                        Value="Center"/>
                                        </Style>
                                </Setter.Value>
                        </Setter>
                        <Setter Property="ColumnHeaderStyle">
                                <Setter.Value>
                                        <Style TargetType="DataGridColumnHeader">
                                                <Setter Property="Background"
                                                        Value="Transparent"/>
                                                <Setter Property="Foreground"
                                                        Value="#2C3E50"/>
                                                <Setter Property="FontWeight"
                                                        Value="SemiBold"/>
                                                <Setter Property="FontSize"
                                                        Value="10"/>
                                                <Setter Property="BorderBrush"
                                                        Value="#E0E6ED"/>
                                                <Setter Property="BorderThickness"
                                                        Value="0,0,0,1"/>
                                                <Setter Property="Padding"
                                                        Value="4"/>
                                                <Setter Property="Height"
                                                        Value="26"/>
                                        </Style>
                                </Setter.Value>
                        </Setter>
                </Style>
        </UserControl.Resources>

        <ScrollViewer VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled">
                <StackPanel Margin="10">

                        <!-- TÃ­tulo -->
                        <TextBlock Text="Dashboard"
                                   FontSize="20"
                                   FontWeight="Bold"
                                   Foreground="#2C3E50"
                                   Margin="0,0,0,10"/>

                        <!-- Cards de Resumo -->
                        <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0"
                                        Style="{StaticResource CardStyle}"
                                        Margin="0,0,4,0">
                                        <StackPanel>
                                                <TextBlock Text="ðŸ“‹"
                                                           FontSize="24"
                                                           HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding PedidosHoje}"
                                                           Style="{StaticResource BigValueStyle}"/>
                                                <TextBlock Text="Pedidos Hoje"
                                                           Style="{StaticResource LabelStyle}"/>
                                        </StackPanel>
                                </Border>

                                <Border Grid.Column="1"
                                        Style="{StaticResource CardStyle}"
                                        Margin="4,0,4,0">
                                        <StackPanel>
                                                <TextBlock Text="ðŸ’°"
                                                           FontSize="24"
                                                           HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding FaturamentoHoje, StringFormat={}{0:N0} AOA}"
                                                           Style="{StaticResource BigValueStyle}"
                                                           FontSize="16"/>
                                                <TextBlock Text="Faturamento Hoje"
                                                           Style="{StaticResource LabelStyle}"/>
                                        </StackPanel>
                                </Border>

                                <Border Grid.Column="2"
                                        Style="{StaticResource CardStyle}"
                                        Margin="4,0,4,0">
                                        <StackPanel>
                                                <TextBlock Text="ðŸŽ«"
                                                           FontSize="24"
                                                           HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding TicketMedio, StringFormat={}{0:N0} AOA}"
                                                           Style="{StaticResource BigValueStyle}"
                                                           FontSize="16"/>
                                                <TextBlock Text="Ticket MÃ©dio"
                                                           Style="{StaticResource LabelStyle}"/>
                                        </StackPanel>
                                </Border>

                                <Border Grid.Column="3"
                                        Style="{StaticResource CardStyle}"
                                        Margin="4,0,0,0">
                                        <StackPanel>
                                                <TextBlock Text="ðŸ”§"
                                                           FontSize="24"
                                                           HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding ItensEmServico}"
                                                           Style="{StaticResource BigValueStyle}"/>
                                                <TextBlock Text="Itens em ServiÃ§o"
                                                           Style="{StaticResource LabelStyle}"/>
                                        </StackPanel>
                                </Border>
                        </Grid>

                        <!-- Grid Principal com 3 colunas -->
                        <Grid>
                                <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="3*"/>
                                        <ColumnDefinition Width="1*"/>
                                        <ColumnDefinition Width="1*"/>
                                </Grid.ColumnDefinitions>

                                <!-- COLUNA 0: DataGrid - Pedidos com Filtros -->
                                <Border Grid.Column="0"
                                        Style="{StaticResource SimpleCardStyle}"
                                        Margin="0,0,8,0">

                                        <StackPanel>
                                                <TextBlock Text="Pedidos Recentes"
                                                           FontSize="13"
                                                           FontWeight="SemiBold"
                                                           Margin="0,0,0,8"/>

                                                <!-- FILTROS -->
                                                <Grid Margin="0,0,0,8">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <!-- Filtro por TÃ©cnico -->
                                                        <StackPanel Grid.Column="0"
                                                                    Margin="0,0,6,0">
                                                                <TextBlock Text="TÃ©cnico:"
                                                                           FontSize="9"
                                                                           Foreground="#6B7A90"
                                                                           Margin="0,0,0,1"/>
                                                                <ComboBox ItemsSource="{Binding TecnicosLista}"
                                                                          SelectedItem="{Binding TecnicoFiltro}"
                                                                          Style="{StaticResource ComboBoxStyle}"
                                                                          Height="24"
                                                                          FontSize="10"
                                                                          MinWidth="120"/>
                                                        </StackPanel>

                                                        <!-- Data Inicial -->
                                                        <StackPanel Grid.Column="1"
                                                                    Margin="0,0,6,0"
                                                                    VerticalAlignment="Top">
                                                                <TextBlock Text="Data Inicial:"
                                                                           FontSize="9"
                                                                           Foreground="#6B7A90"
                                                                           Margin="0,0,0,1"/>

                                                                <TextBox Text="{Binding DataTextoFiltro,
                                UpdateSourceTrigger=PropertyChanged,
                                Converter={StaticResource DateMaskConverter}}"
                                                                         Style="{StaticResource DataTextBoxStyle}"
                                                                         Height="24"
                                                                         FontSize="10"
                                                                         MaxLength="10"
                                                                         Width="90">
                                                                        <TextBox.InputBindings>
                                                                                <KeyBinding Key="Enter"
                                                                                            Command="{Binding AplicarFiltroDataCommand}"/>
                                                                        </TextBox.InputBindings>
                                                                </TextBox>
                                                        </StackPanel>

                                                        <!-- Data Final -->
                                                        <StackPanel Grid.Column="2"
                                                                    Margin="0,0,6,0"
                                                                    VerticalAlignment="Top">
                                                                <TextBlock Text="Data Final:"
                                                                           FontSize="9"
                                                                           Foreground="#6B7A90"
                                                                           Margin="0,0,0,1"/>

                                                                <TextBox Text="{Binding DataTextoFinalFiltro,
                                UpdateSourceTrigger=PropertyChanged,
                                Converter={StaticResource DateMaskConverter}}"
                                                                         Style="{StaticResource DataTextBoxStyle}"
                                                                         Height="24"
                                                                         FontSize="10"
                                                                         MaxLength="10"
                                                                         Width="90">
                                                                        <TextBox.InputBindings>
                                                                                <KeyBinding Key="Enter"
                                                                                            Command="{Binding AplicarFiltroDataCommand}"/>
                                                                        </TextBox.InputBindings>
                                                                </TextBox>
                                                        </StackPanel>

                                                        <!-- BotÃµes -->
                                                        <StackPanel Grid.Column="3"
                                                                    Orientation="Horizontal"
                                                                    VerticalAlignment="Top">
                                                                <Button Content="Hoje"
                                                                        Command="{Binding FiltrarHojeCommand}"
                                                                        Background="#3498DB"
                                                                        Height="24"
                                                                        Width="38"
                                                                        FontSize="8"
                                                                        Margin="0,16,2,0"/>

                                                                <Button Content="MÃªs"
                                                                        Command="{Binding FiltrarMesCommand}"
                                                                        Background="#3498DB"
                                                                        Height="24"
                                                                        Width="38"
                                                                        FontSize="8"
                                                                        Margin="0,16,2,0"/>

                                                                <Button Content="Limpar"
                                                                        Command="{Binding LimparFiltrosCommand}"
                                                                        Background="#E74C3C"
                                                                        Height="24"
                                                                        Width="45"
                                                                        FontSize="8"
                                                                        Margin="0,16,0,0"/>
                                                        </StackPanel>
                                                </Grid>

                                                <!-- DataGrid -->
                                                <Border BorderBrush="#E0E6ED"
                                                        BorderThickness="1"
                                                        CornerRadius="4"
                                                        Background="White"
                                                        Height="250">
                                                        <DataGrid ItemsSource="{Binding PedidosFiltrados}"
                                                                  AutoGenerateColumns="False"
                                                                  CanUserAddRows="False"
                                                                  Style="{StaticResource RoundedDataGrid}"
                                                                  BorderThickness="0"
                                                                  Background="White"
                                                                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                  IsReadOnly="True"
                                                                  SelectionMode="Single"
                                                                  SelectedItem="{Binding PedidoSelecionado, Mode=TwoWay}"
                                                                  x:Name="PedidosDataGrid">

                                                                <!-- ContextMenu do DataGrid -->
                                                                <DataGrid.ContextMenu>
                                                                        <ContextMenu>
                                                                                <MenuItem Header="Alterar TÃ©cnico"
                                                                                          Command="{Binding AlterarTecnicoCommand}"
                                                                                          CommandParameter="{Binding PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                                                          IsEnabled="{Binding PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}, Converter={StaticResource NotNullConverter}}">
                                                                                        <MenuItem.Icon>
                                                                                                <TextBlock Text="ðŸ”§"
                                                                                                                FontSize="14"
                                                                                                                Margin="5,0,5,0"/>
                                                                                        </MenuItem.Icon>
                                                                                </MenuItem>
                                                                                <Separator/>
                                                                                <MenuItem Header="Cancelar Pedido"
                                                                                          Command="{Binding CancelarPedidoCommand}"
                                                                                          CommandParameter="{Binding PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                                                          IsEnabled="{Binding PlacementTarget.SelectedItem.Status, RelativeSource={RelativeSource AncestorType=ContextMenu}, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Ativo}">
                                                                                        <MenuItem.Icon>
                                                                                                <TextBlock Text="âŒ"
                                                                                                                FontSize="14"
                                                                                                                Margin="5,0,5,0"/>
                                                                                        </MenuItem.Icon>
                                                                                </MenuItem>
                                                                        </ContextMenu>
                                                                </DataGrid.ContextMenu>

                                                                <DataGrid.Columns>
                                                                        <DataGridTextColumn Header="NÂº"
                                                                                            Binding="{Binding NumeroPedido}"
                                                                                            Width="35"/>
                                                                        <DataGridTextColumn Header="Cliente"
                                                                                            Binding="{Binding Cliente.Nome}"
                                                                                            Width="2*"/>
                                                                        <DataGridTextColumn Header="Marca"
                                                                                            Binding="{Binding Itens[0].Marca}"
                                                                                            Width="70"/>
                                                                        <DataGridTextColumn Header="Modelo"
                                                                                            Binding="{Binding Itens[0].Modelo}"
                                                                                            Width="70"/>
                                                                        <DataGridTextColumn Header="TÃ©cnicos"
                                                                                            Binding="{Binding TecnicosConcatenados}"
                                                                                            Width="80">
                                                                                <DataGridTextColumn.ElementStyle>
                                                                                        <Style TargetType="TextBlock">
                                                                                                <Setter Property="FontSize"
                                                                                                                Value="9"/>
                                                                                                <Setter Property="VerticalAlignment"
                                                                                                                Value="Center"/>
                                                                                                <Setter Property="Foreground"
                                                                                                                Value="#2C3E50"/>
                                                                                        </Style>
                                                                                </DataGridTextColumn.ElementStyle>
                                                                        </DataGridTextColumn>
                                                                        <DataGridTextColumn Header="Data"
                                                                                            Binding="{Binding Data, StringFormat=dd/MM/yyyy}"
                                                                                            Width="70"/>
                                                                        <DataGridTextColumn Header="Total"
                                                                                            Binding="{Binding Total, StringFormat={}{0:N0} AOA}"
                                                                                            Width="80"/>
                                                                        <DataGridTextColumn Header="Status"
                                                                                            Binding="{Binding Status}"
                                                                                            Width="60">
                                                                                <DataGridTextColumn.ElementStyle>
                                                                                        <Style TargetType="TextBlock">
                                                                                                <Setter Property="FontWeight"
                                                                                                                Value="SemiBold"/>
                                                                                                <Setter Property="VerticalAlignment"
                                                                                                                Value="Center"/>
                                                                                                <Setter Property="FontSize"
                                                                                                                Value="9"/>
                                                                                                <Style.Triggers>
                                                                                                        <DataTrigger Binding="{Binding Status}"
                                                                                                                        Value="Cancelado">
                                                                                                                <Setter Property="Foreground"
                                                                                                                                Value="#E74C3C"/>
                                                                                                        </DataTrigger>
                                                                                                        <DataTrigger Binding="{Binding Status}"
                                                                                                                        Value="Ativo">
                                                                                                                <Setter Property="Foreground"
                                                                                                                                Value="#27AE60"/>
                                                                                                        </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                        </Style>
                                                                                </DataGridTextColumn.ElementStyle>
                                                                        </DataGridTextColumn>
                                                                </DataGrid.Columns>
                                                        </DataGrid>
                                                </Border>

                                                <!-- BotÃµes Cancelar e Alterar TÃ©cnico -->
                                                <Grid Margin="0,8,0,0">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <!-- BotÃ£o Cancelar Pedido -->
                                                        <Button Grid.Column="1"
                                                                Content="Cancelar Pedido"
                                                                Command="{Binding CancelarPedidoCommand}"
                                                                CommandParameter="{Binding SelectedItem, ElementName=PedidosDataGrid}"
                                                                Background="#E74C3C"
                                                                Height="28"
                                                                Width="140"
                                                                FontSize="10"
                                                                FontWeight="Bold"
                                                                Padding="4,0"
                                                                Margin="0,0,5,0">
                                                                <Button.Style>
                                                                        <Style TargetType="Button"
                                                                                        BasedOn="{StaticResource {x:Type Button}}">
                                                                                <Setter Property="IsEnabled"
                                                                                                Value="False"/>
                                                                                <Setter Property="Background"
                                                                                                Value="#95A5A6"/>
                                                                                <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding SelectedItem.Status, ElementName=PedidosDataGrid}"
                                                                                                        Value="Ativo">
                                                                                                <Setter Property="IsEnabled"
                                                                                                                Value="True"/>
                                                                                                <Setter Property="Background"
                                                                                                                Value="#E74C3C"/>
                                                                                        </DataTrigger>
                                                                                        <Trigger Property="IsMouseOver"
                                                                                                        Value="True">
                                                                                                <Setter Property="Background"
                                                                                                                Value="#C0392B"/>
                                                                                        </Trigger>
                                                                                </Style.Triggers>
                                                                        </Style>
                                                                </Button.Style>
                                                        </Button>

                                                        <!-- BotÃ£o Alterar TÃ©cnico -->
                                                        <Button Grid.Column="2"
                                                                Content="Alterar TÃ©cnico"
                                                                Command="{Binding AlterarTecnicoCommand}"
                                                                CommandParameter="{Binding SelectedItem, ElementName=PedidosDataGrid}"
                                                                Background="#3498DB"
                                                                Height="28"
                                                                Width="140"
                                                                FontSize="10"
                                                                FontWeight="Bold"
                                                                Padding="4,0"
                                                                Margin="0,0,0,0">
                                                                <Button.Style>
                                                                        <Style TargetType="Button"
                                                                                        BasedOn="{StaticResource {x:Type Button}}">
                                                                                <Setter Property="IsEnabled"
                                                                                                Value="False"/>
                                                                                <Setter Property="Background"
                                                                                                Value="#95A5A6"/>
                                                                                <Style.Triggers>
                                                                                        <MultiDataTrigger>
                                                                                                <MultiDataTrigger.Conditions>
                                                                                                        <Condition Binding="{Binding SelectedItem, ElementName=PedidosDataGrid}"
                                                                                                                        Value="{x:Null}"/>
                                                                                                </MultiDataTrigger.Conditions>
                                                                                                <Setter Property="IsEnabled"
                                                                                                                Value="False"/>
                                                                                        </MultiDataTrigger>
                                                                                        <MultiDataTrigger>
                                                                                                <MultiDataTrigger.Conditions>
                                                                                                        <Condition Binding="{Binding SelectedItem, ElementName=PedidosDataGrid}"
                                                                                                                        Value="{x:Null}"/>
                                                                                                        <Condition Binding="{Binding SelectedItem.Status, ElementName=PedidosDataGrid}"
                                                                                                                        Value="Cancelado"/>
                                                                                                </MultiDataTrigger.Conditions>
                                                                                                <Setter Property="IsEnabled"
                                                                                                                Value="False"/>
                                                                                        </MultiDataTrigger>
                                                                                        <MultiDataTrigger>
                                                                                                <MultiDataTrigger.Conditions>
                                                                                                        <Condition Binding="{Binding SelectedItem, ElementName=PedidosDataGrid}"
                                                                                                                        Value="{x:Null}"/>
                                                                                                        <Condition Binding="{Binding SelectedItem.Status, ElementName=PedidosDataGrid}"
                                                                                                                        Value="Ativo"/>
                                                                                                </MultiDataTrigger.Conditions>
                                                                                                <Setter Property="IsEnabled"
                                                                                                                Value="True"/>
                                                                                                <Setter Property="Background"
                                                                                                                Value="#3498DB"/>
                                                                                        </MultiDataTrigger>
                                                                                        <DataTrigger Binding="{Binding SelectedItem, ElementName=PedidosDataGrid}"
                                                                                                        Value="{x:Null}">
                                                                                                <Setter Property="IsEnabled"
                                                                                                                Value="False"/>
                                                                                        </DataTrigger>
                                                                                        <DataTrigger Binding="{Binding SelectedItem.Status, ElementName=PedidosDataGrid}"
                                                                                                        Value="Ativo">
                                                                                                <Setter Property="IsEnabled"
                                                                                                                Value="True"/>
                                                                                                <Setter Property="Background"
                                                                                                                Value="#3498DB"/>
                                                                                        </DataTrigger>
                                                                                        <Trigger Property="IsMouseOver"
                                                                                                        Value="True">
                                                                                                <Setter Property="Background"
                                                                                                                Value="#2980B9"/>
                                                                                        </Trigger>
                                                                                </Style.Triggers>
                                                                        </Style>
                                                                </Button.Style>
                                                        </Button>
                                                </Grid>

                                                <!-- Contador de resultados -->
                                                <TextBlock Text="{Binding ResultadosFiltro}"
                                                           FontSize="9"
                                                           Foreground="#6B7A90"
                                                           HorizontalAlignment="Right"
                                                           Margin="0,4,0,0"/>
                                        </StackPanel>
                                </Border>

                                <!-- COLUNA 1: Cards de Resumo Filtrados -->
                                <Border Grid.Column="1"
                                        Style="{StaticResource SimpleCardStyle}"
                                        Margin="0,0,8,0">
                                        <StackPanel>
                                                <TextBlock Text="Resumo do Filtro"
                                                           FontSize="13"
                                                           FontWeight="SemiBold"
                                                           Margin="0,0,0,12"/>

                                                <!-- Card Pedidos Filtrados -->
                                                <Border Style="{StaticResource CardStyle}"
                                                        Margin="0,0,0,8">
                                                        <StackPanel>
                                                                <TextBlock Text="ðŸ“‹"
                                                                           FontSize="20"
                                                                           HorizontalAlignment="Center"/>
                                                                <TextBlock Text="{Binding PedidosFiltradosTotal}"
                                                                           Style="{StaticResource BigValueStyle}"
                                                                           FontSize="18"/>
                                                                <TextBlock Text="Pedidos (Filtro)"
                                                                           Style="{StaticResource LabelStyle}"/>
                                                        </StackPanel>
                                                </Border>

                                                <!-- Card Faturamento Filtrado -->
                                                <Border Style="{StaticResource CardStyle}"
                                                        Margin="0,0,0,8">
                                                        <StackPanel>
                                                                <TextBlock Text="ðŸ’°"
                                                                           FontSize="20"
                                                                           HorizontalAlignment="Center"/>
                                                                <TextBlock Text="{Binding FaturamentoFiltrado, StringFormat={}{0:N0} AOA}"
                                                                           Style="{StaticResource BigValueStyle}"
                                                                           FontSize="14"/>
                                                                <TextBlock Text="Faturamento (Filtro)"
                                                                           Style="{StaticResource LabelStyle}"/>
                                                        </StackPanel>
                                                </Border>

                                                <!-- Card Ticket MÃ©dio Filtrado -->
                                                <Border Style="{StaticResource CardStyle}"
                                                        Margin="0,0,0,8">
                                                        <StackPanel>
                                                                <TextBlock Text="ðŸŽ«"
                                                                           FontSize="20"
                                                                           HorizontalAlignment="Center"/>
                                                                <TextBlock Text="{Binding TicketMedioFiltrado, StringFormat={}{0:N0} AOA}"
                                                                           Style="{StaticResource BigValueStyle}"
                                                                           FontSize="14"/>
                                                                <TextBlock Text="Ticket MÃ©dio (Filtro)"
                                                                           Style="{StaticResource LabelStyle}"/>
                                                        </StackPanel>
                                                </Border>

                                                <!-- Card Itens Filtrados -->
                                                <Border Style="{StaticResource CardStyle}">
                                                        <StackPanel>
                                                                <TextBlock Text="ðŸ”§"
                                                                           FontSize="20"
                                                                           HorizontalAlignment="Center"/>
                                                                <TextBlock Text="{Binding ItensFiltrados}"
                                                                           Style="{StaticResource BigValueStyle}"
                                                                           FontSize="18"/>
                                                                <TextBlock Text="Itens (Filtro)"
                                                                           Style="{StaticResource LabelStyle}"/>
                                                        </StackPanel>
                                                </Border>

                                                <!-- Legenda do filtro atual -->
                                                <Border Background="#F0F7FF"
                                                        CornerRadius="4"
                                                        Padding="6"
                                                        Margin="0,10,0,0">
                                                        <TextBlock Text="Os valores acima refletem os filtros aplicados"
                                                                   FontSize="8"
                                                                   Foreground="#3498DB"
                                                                   TextWrapping="Wrap"
                                                                   TextAlignment="Center"/>
                                                </Border>
                                        </StackPanel>
                                </Border>

                                <!-- COLUNA 2: Lista de TÃ©cnicos e Total de Pedidos -->
                                <Border Grid.Column="2"
                                        Style="{StaticResource SimpleCardStyle}">

                                        <StackPanel>
                                                <TextBlock Text="TÃ©cnicos"
                                                           FontSize="13"
                                                           FontWeight="SemiBold"
                                                           Margin="0,0,0,8"/>

                                                <!-- CabeÃ§alho da Lista -->
                                                <Grid Margin="0,0,0,5">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <TextBlock Grid.Column="0"
                                                                   Text="Nome"
                                                                   FontSize="10"
                                                                   FontWeight="SemiBold"
                                                                   Foreground="#2C3E50"/>

                                                        <TextBlock Grid.Column="1"
                                                                   Text="Ped."
                                                                   FontSize="10"
                                                                   FontWeight="SemiBold"
                                                                   Foreground="#2C3E50"
                                                                   Margin="5,0,0,0"/>
                                                </Grid>

                                                <!-- Separador -->
                                                <Border Style="{StaticResource SeparatorStyle}"/>

                                                <!-- Lista de TÃ©cnicos -->
                                                <ListView ItemsSource="{Binding TecnicosPerformance}"
                                                          Style="{StaticResource TecnicoListViewStyle}"
                                                          Height="180"
                                                          ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                        <ListView.ItemTemplate>
                                                                <DataTemplate>
                                                                        <Grid Margin="0,0,0,1">
                                                                                <Grid.ColumnDefinitions>
                                                                                        <ColumnDefinition Width="*"/>
                                                                                        <ColumnDefinition Width="Auto"/>
                                                                                </Grid.ColumnDefinitions>

                                                                                <StackPanel Grid.Column="0"
                                                                                            Orientation="Horizontal">
                                                                                        <Border Background="#3498DB"
                                                                                                Width="4"
                                                                                                Height="4"
                                                                                                CornerRadius="2"
                                                                                                Margin="0,4,4,0"/>
                                                                                        <TextBlock Text="{Binding Nome}"
                                                                                                   FontSize="10"
                                                                                                   Foreground="#2C3E50"
                                                                                                   VerticalAlignment="Center"/>
                                                                                </StackPanel>

                                                                                <Border Grid.Column="1"
                                                                                        Background="#F0F3F7"
                                                                                        CornerRadius="8"
                                                                                        Padding="4,0"
                                                                                        Margin="5,0,0,0">
                                                                                        <TextBlock Text="{Binding TotalPedidos}"
                                                                                                   FontSize="9"
                                                                                                   FontWeight="Bold"
                                                                                                   Foreground="#3498DB"
                                                                                                   HorizontalAlignment="Center"/>
                                                                                </Border>
                                                                        </Grid>
                                                                </DataTemplate>
                                                        </ListView.ItemTemplate>
                                                </ListView>

                                                <!-- Separador -->
                                                <Border Style="{StaticResource SeparatorStyle}"
                                                        Margin="0,6"/>

                                                <!-- Total Geral -->
                                                <Grid Margin="0,3,0,0">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <TextBlock Grid.Column="0"
                                                                   Text="Total"
                                                                   FontSize="11"
                                                                   FontWeight="Bold"
                                                                   Foreground="#2C3E50"/>

                                                        <Border Grid.Column="1"
                                                                Background="#2C3E50"
                                                                CornerRadius="10"
                                                                Padding="8,2">
                                                                <TextBlock Text="{Binding TotalGeralPedidos}"
                                                                           FontSize="11"
                                                                           FontWeight="Bold"
                                                                           Foreground="White"/>
                                                        </Border>
                                                </Grid>
                                        </StackPanel>
                                </Border>
                        </Grid>
                </StackPanel>
        </ScrollViewer>
</UserControl>